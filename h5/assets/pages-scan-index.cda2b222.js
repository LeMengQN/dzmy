import{r as e,t as o,a as t,o as i,ad as l,U as A,af as r,V as a,bz as n,a0 as s,f as c,g,w as h,i as d,u as f,k as m,bs as x,l as p,j as w,m as B,x as u,ay as C,y as Q,C as K}from"./index.1a866322.js";import{_ as I}from"./u-icon.1541541b.js";import{o as F,a as y,r as k}from"./uni-app.es.5638d019.js";import{h as D,g as G}from"./methods.10d71805.js";import{u as M}from"./useState.33e874ff.js";import{w as S}from"./index.0e6263ad.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";var E=q({__name:"index",setup(q){const E=q;let b=0;const P=M(["MerchantId","islogin","userinfo"]),{MerchantId:R,islogin:J,userinfo:O}=P,j=e({getAdm:!1,ScanText:"",wxConfig:{appid:"",noncestr:"",signature:"",timestamp:"",url:""}}),{getAdm:Z,ScanText:Y,wxConfig:T}=o(j);function v(e){let o="";navigator.userAgent.toLowerCase(),o=window.location.href.split("#")[0],A(o).then((o=>{if(o){const a=o.Result;j.wxConfig=a,b=3,r(),j.getAdm=!0,e&&N(),t=a.appid,i=a.timestamp,l=a.noncestr,A=a.signature,S.config({debug:!1,appId:t,timestamp:i,nonceStr:l,signature:A,jsApiList:["scanQRCode","checkJsApi"]}),S.ready((()=>{console.log("配置完成，扫码前准备完成")})),S.error((function(e){alert("出错了111："+e.errMsg)}))}else alert("获取配置信息返回为空");var t,i,l,A})).catch((o=>{b<3?setTimeout((()=>{b++,v(e)}),1e3):(b=0,j.getAdm=!1,r(),o.Msg&&a({title:"提示",content:o.Msg,showCancel:!1,success:e=>{}}))}))}function L(){J.value?a({title:"提示",content:"是否退出或切换用户？",success:e=>{e.confirm&&G({close:!1,url:window.location.href},!0)}}):G({url:window.location.href},!0)}function z(){J.value?j.ScanText?n(j.ScanText).then((e=>{data.Result?a({title:"提示",content:"核销成功。"}):s({title:"核销失败",icon:"none"})})).catch((e=>{})):s({title:"请输入核销码",icon:"none"}):G({url:window.location.href},!0)}function V(){J.value?j.getAdm?N():(l({title:"加载中..."}),v(!0)):G({url:window.location.href},!0)}function N(){S.scanQRCode({needResult:1,scanType:["qrCode"],success:e=>{console.log("摄像头"),n(e.resultStr,E.MerchantId).then((e=>{e.Result?a({title:"提示",content:"核销成功。"}):s({title:"核销失败",icon:"none"})})).catch((e=>{}))},error:e=>{console.log("错误信息：",e),a({content:"error"+JSON.stringify(e)})}})}return D(),t(""),i((()=>{})),F((e=>{console.log("路由信息===>",e),e.MerchantId||location.replace("https://appwx.xuezhilian.com/xzb/index.html#/pages/error/404")})),y((()=>{J.value?(l({title:"加载中..."}),v(!1)):console.log("没有登陆")})),(e,o)=>{const t=k(u("u-icon"),I),i=C,l=Q,A=d,r=K;return c(),g(A,{style:{height:"100vh",width:"750rpx","background-color":"#FFF",display:"flex","align-items":"center","flex-direction":"column"}},{default:h((()=>[null!=f(O)&&null!=f(O).platformExt&&null!=f(O).platformExt.Name?(c(),g(A,{key:0,style:{width:"750rpx",display:"flex","align-items":"center","justify-content":"center","margin-top":"35rpx"}},{default:h((()=>[m(A,{class:"pl-2 box-border",style:{display:"flex","background-color":"#F2F2F2",height:"80rpx",width:"600rpx","border-radius":"80rpx","align-items":"center"}},{default:h((()=>[m(t,{name:"search",color:"#FF9B2F",size:"40"}),m(i,{modelValue:f(Y),"onUpdate:modelValue":o[0]||(o[0]=e=>x(Y)?Y.value=e:null),modelModifiers:{trim:!0},"placeholder-class":"placeholder-input",maxlength:"30",placeholder:"输入课程核销码",style:{width:"400rpx",height:"60rpx","margin-left":"20rpx","font-size":"30rpx"}},null,8,["modelValue"]),m(l,{class:"clickBefore",style:{"margin-right":"10rpx","background-image":"linear-gradient(to right, #EF932E,#FE6811)",height:"65rpx","line-height":"65rpx",width:"130rpx",color:"#FFFFFF","text-align":"center","border-radius":"65rpx","font-size":"26rpx"},onClick:z},{default:h((()=>[p("核验")])),_:1})])),_:1}),m(r,{onClick:L,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAKlBMVEUAAAAAAAAAAAAAAADa2toAAAD7+/vi4uLExMRsbGz09PSXl5fr6+v///+5AcDsAAAADXRSTlMzACoboA/vrIVN2WHAP5bqJQAAAbdJREFUSMeVlz1OAzEQhV+8CYQ/KclqewdEn0XKDThAAndAilBqGpDoaVIj0dFyA3IEOhRQhO+CljjgnfXsPl4ZfXrx89ozY/SFLs8scHwylr9DYBZeZlwDZiMESqYamFqUZPI4mKKiPAZmtgqaaQT0nCCr4ARRdSSYQlEuQKuBpgz2oGroQZFYTQ5hqFoiWKGmP3AANFh6cFQPJlswQ4OmHuw1gS0P2ibQbMAMIP4bIrOaGyKzlrsAQagAUwbM+ygt8XXuCl1HFonwaHfdRl+Rg44wy9KDH5E0CLO8uefzQveRNAi3e77WtxxhaPeux8YgDj7I2OhFwUMn1tnCJAoeuU+xPxhFwbYTlokC4k5YJrBxcFdYGglqlgYQoGZZBdtXGzlvqYJLt9WqHnz6Bdf14MHNj26dmyGQmvrRrRYMuPfiZtQ+SkMjPmFoSH3rfbnCRDlmO8IQHeXgdtcLeXAH3J0Z0peLvq5sAaBLCl2k6LJHF1K2NNPFnm4fdEPiWxzfNPk2zDd2flRoimOCKeWiDjz994DUsMohO8TRYyE/aPKjKz8M8+M1P7DzTwD+URF/ppjqM+Ub3wPRhP/cTDkAAAAASUVORK5CYII=",mode:"",style:{width:"80rpx",height:"80rpx","margin-left":"25rpx"}})])),_:1})):w("v-if",!0),null!=f(O)&&null!=f(O).platformExt&&null!=f(O).platformExt.Name?(c(),g(A,{key:1,class:"cellDiv clickBefore"},{default:h((()=>[m(r,{onClick:V,src:"data:image/png;base64,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",mode:"",style:{width:"320rpx",height:"320rpx"}}),m(l,{onClick:V,style:{"padding-top":"40rpx","text-align":"center","font-size":"30rpx"}},{default:h((()=>[p("扫一扫核验")])),_:1})])),_:1})):w("v-if",!0),null!=f(O)&&null!=f(O).platformExt&&null!=f(O).platformExt.Name?(c(),g(A,{key:2,style:{"font-size":"40rpx",color:"#fc7404","font-weight":"bold","text-align":"center","margin-bottom":"20px"}},{default:h((()=>[p(B(f(O).platformExt.Name),1)])),_:1})):(c(),g(A,{key:3,onClick:L,style:{"font-size":"40rpx",color:"#fc7404","font-weight":"bold","text-align":"center",margin:"50px 0"}},{default:h((()=>[m(r,{src:"data:image/png;base64,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",mode:"",style:{width:"350rpx",height:"310rpx","margin-top":"30rpx"}}),m(A,{style:{"margin-top":"60rpx"}},{default:h((()=>[p("Oh!很抱歉，你不是商家账号，不能进行课程核销！"),m(A,{style:{display:"flex","margin-left":"80rpx","margin-top":"16rpx"}},{default:h((()=>[p("点击"),m(A,{style:{margin:"4rpx 10rpx 0 10rpx",height:"50rpx","background-color":"#4b97e2",color:"#ffffff","border-radius":"12rpx","font-size":"34rpx"}},{default:h((()=>[p(" 登录")])),_:1}),p("输入商家账号登录核销。")])),_:1})])),_:1})])),_:1})),w(" <view>{{  wxConfig  }}</view> ")])),_:1})}}},[["__scopeId","data-v-6f9cc8e2"]]);export{E as default};
