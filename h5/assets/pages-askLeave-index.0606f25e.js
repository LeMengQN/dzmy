import{r as e,t,a,o as l,bm as s,f as o,g as u,w as n,i as r,u as f,l as d,p as i,q as c,F as p,j as m,k as _,m as y,bn as h,a0 as x,x as g,n as v,V as b,bo as k,y as j,aq as S}from"./index.1a866322.js";import{_ as z,a as I}from"./u-radio-group.12866b1c.js";import{o as C,a as V,b as L,r as w}from"./uni-app.es.5638d019.js";import{_ as T}from"./u-input.afd7c546.js";import{_ as R}from"./u-button.9dd62910.js";import{_ as N}from"./u-popup.ac74065a.js";import{h as D}from"./methods.10d71805.js";import{u as M}from"./useState.33e874ff.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./u-icon.1541541b.js";import"./emitter.5b880544.js";import"./index.0e6263ad.js";var U=O({__name:"index",setup(O){const U=O;M(["MerchantId","islogin"]);const q=e({optionsObj:{},dataList:[],popData:{}}),{optionsObj:F,dataList:$,popData:A}=t(q);a(0);const B=a(10),E=a(2),G=a(0),H=a(!1),J=a(0),K=a("");function P(e){let t={pageIndex:e,pageSize:B.value,merchantId:U.MerchantId};s(t).then((t=>{G.value=t.Total,q.dataList=e<=1?t.Result:q.dataList.concat(t.Result)})).catch((e=>{}))}function Q(){H.value=!1,q.popData={}}function W(){const e={Id:q.popData.Id,LeaveType:J.value,Remark:K.value,merchantId:U.MerchantId};h(e).then((e=>{H.value=!1,"success"==e.Result?(P(1),x({icon:"null",title:"提交成功",duration:1500})):x({icon:"null",title:"当前时间段已经提交请假申请，请勿重复提交!",duration:1500})})).catch((e=>{}))}return l((()=>{})),D(),C((e=>{q.optionsObj=e,console.log("路由参数===>",e),P(1)})),V((()=>{console.log("页面出现时")})),L((()=>{let e=E.value++;q.dataList.length>=G.value||P(e)})),(e,t)=>{const a=r,l=j,s=S,h=w(g("u-radio"),z),C=w(g("u-radio-group"),I),V=w(g("u-input"),T),L=w(g("u-button"),R),D=w(g("u-popup"),N);return o(),u(a,{class:"page"},{default:n((()=>[f($).length<=0?(o(),u(a,{key:0,class:"ees pingjia-null"},{default:n((()=>[d("这里暂无你的请假记录，注意按时上课哦! ")])),_:1})):(o(),u(a,{key:1},{default:n((()=>[(o(!0),i(p,null,c(f($),((e,t)=>(o(),u(a,{class:"shentbox",key:t,style:{position:"relative"}},{default:n((()=>[_(a,{style:{"font-size":"34rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("申请人：")])),_:1}),_(l,{style:{"margin-left":"16rpx"}},{default:n((()=>[d(y(e.StudentName),1)])),_:2},1024)])),_:2},1024),_(a,{style:{"font-size":"34rpx","margin-top":"14rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("申请类型："+y(0==e.LeaveType?"事假":2==e.LeaveType?"其他":"病假"),1)])),_:2},1024)])),_:2},1024),_(a,{style:{"font-size":"30rpx","margin-top":"6rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("申请时间：")])),_:1}),d(y(e.CreateTime),1)])),_:2},1024),_(a,{style:{"font-size":"30rpx","margin-top":"6rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("起止时间：")])),_:1}),d(y(e.SchoolTime),1)])),_:2},1024),_(a,{style:{"font-size":"30rpx","margin-top":"6rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("课程名称：")])),_:1}),d(y(e.ClassShiftName),1)])),_:2},1024),_(a,{style:{"font-size":"30rpx","margin-top":"6rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("班级名称：")])),_:1}),d(y(e.ClassTypeName),1)])),_:2},1024),_(a,{style:{"font-size":"30rpx","margin-top":"6rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("请假状态：")])),_:1}),_(l,{style:v("color:"+(1==e.Status?"red":0==e.Status?"green":"blue"))},{default:n((()=>[d(y(1==e.Status?"请假已被驳回":0==e.Status?"请假已通过":"请假已撤销"),1)])),_:2},1032,["style"])])),_:2},1024),_(a,{style:{"font-size":"30rpx","margin-top":"18rpx"}},{default:n((()=>[_(l,{style:{color:"#999999"}},{default:n((()=>[d("情况说明：")])),_:1}),d(y(e.Remark),1),e.Remark?m("v-if",!0):(o(),u(l,{key:0},{default:n((()=>[d("暂未填写请假说明")])),_:1}))])),_:2},1024),_(a,{class:"flex align-center justify-around mt-4"},{default:n((()=>[0==e.Status?(o(),u(s,{key:0,class:"hellow",style:{border:"none","background-color":"#b4b4b4"}},{default:n((()=>[_(l,{style:{color:"#ffffff","font-size":"24rpx"}},{default:n((()=>[d("审核通过")])),_:1})])),_:1})):m("v-if",!0),1==e.Status?(o(),u(s,{key:1,class:"hellow",style:{border:"none","background-color":"#a1a1a1"}},{default:n((()=>[_(l,{style:{color:"#ffffff","font-size":"24rpx"}},{default:n((()=>[d("已被驳回")])),_:1})])),_:1})):m("v-if",!0),3==e.Status?(o(),u(s,{key:2,class:"hellowed",onClick:t=>function(e,t){console.log("item是什么1111",e),q.popData=e,H.value=!0}(e)},{default:n((()=>[_(l,{style:{color:"#55aaff","font-size":"24rpx"}},{default:n((()=>[d("再次提交")])),_:1})])),_:2},1032,["onClick"])):m("v-if",!0),3!=e.Status?(o(),u(s,{key:3,class:"hellow",onClick:a=>function(e,t){b({title:"提示",content:"确定撤销该申请",success:function(a){a.confirm?k({Id:e.Id,merchantId:U.MerchantId}).then((e=>{e&&"success"==e.Result&&x({icon:"null",title:"撤销成功",duration:1500,success(){q.dataList[t].Status=3}})})).catch((e=>{})):a.cancel}})}(e,t)},{default:n((()=>[_(l,{style:{color:"#F68316","font-size":"24rpx"}},{default:n((()=>[d("撤销申请")])),_:1})])),_:2},1032,["onClick"])):m("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})),m(" 请假弹窗 "),_(D,{modelValue:H.value,"onUpdate:modelValue":t[3]||(t[3]=e=>H.value=e),mode:"center"},{default:n((()=>[_(a,{class:"leave-box"},{default:n((()=>[_(a,{class:"text-center font-sm font-weight-600"},{default:n((()=>[d("请假申请")])),_:1}),f(A).ClassShiftName?(o(),u(a,{key:0,class:"msg-con font-small"},{default:n((()=>[_(a,null,{default:n((()=>[d("名字："+y(f(A).StudentName),1)])),_:1}),_(a,null,{default:n((()=>[d("班级名称："+y(f(A).ClassShiftName),1)])),_:1}),_(a,null,{default:n((()=>[d("时间："+y(f(A).SchoolTime),1)])),_:1}),_(a,null,{default:n((()=>[d("申请原因： "),_(C,{modelValue:J.value,"onUpdate:modelValue":t[0]||(t[0]=e=>J.value=e)},{default:n((()=>[_(h,{name:0},{default:n((()=>[d("事假")])),_:1}),_(h,{name:1},{default:n((()=>[d("病假")])),_:1}),_(h,{name:2},{default:n((()=>[d("其他")])),_:1})])),_:1},8,["modelValue"])])),_:1}),_(a,null,{default:n((()=>[d("情况说明")])),_:1}),_(V,{modelValue:K.value,"onUpdate:modelValue":t[1]||(t[1]=e=>K.value=e),type:"textarea",border:!0,height:100,"auto-height":!0},null,8,["modelValue"]),_(a,{class:"flex justify-around mt-2"},{default:n((()=>[_(L,{class:"w-40 btn","hair-line":"",plain:"",shape:"circle",onClick:Q},{default:n((()=>[d("取消")])),_:1}),_(L,{class:"w-40 btn-confirm",shape:"circle",onClick:t[2]||(t[2]=t=>e.$u.throttle(W,500))},{default:n((()=>[d("确认 ")])),_:1})])),_:1})])),_:1})):m("v-if",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-04b92127"]]);export{U as default};
