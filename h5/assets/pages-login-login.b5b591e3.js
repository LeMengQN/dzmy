import{x as e,f as t,g as l,w as a,k as i,v as s,n as o,H as n,i as u,a as r,r as c,t as d,S as h,l as m,m as p,j as f,a6 as b,W as v,as as g,at as _,a1 as x,a0 as y,a3 as k,au as w,av as C,af as S,aw as $,y as z,D as V,K as D}from"./index.1a866322.js";import{_ as B}from"./u-field.6c7fbccd.js";import{r as M,o as j}from"./uni-app.es.5638d019.js";import{_ as E}from"./u-button.9dd62910.js";import{_ as I}from"./u-verification-code.1ec03bf7.js";import{_ as P}from"./u-icon.1541541b.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import{E as A}from"./emitter.5b880544.js";import{h as N,p as L}from"./methods.10d71805.js";import"./index.0e6263ad.js";var O=U({name:"u-checkbox",emits:["update:modelValue","input","change"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},name:{type:[String,Number],default:""},shape:{type:String,default:""},disabled:{type:[String,Boolean],default:""},labelDisabled:{type:[String,Boolean],default:""},activeColor:{type:String,default:""},iconSize:{type:[String,Number],default:""},labelSize:{type:[String,Number],default:""},size:{type:[String,Number],default:""}},data:()=>({parentDisabled:!1,newParams:{}}),created(){this.parent=this.$u.$parent.call(this,"u-checkbox-group"),this.parent&&this.parent.children.push(this)},computed:{valueCom(){return this.modelValue},isDisabled(){return""!==this.disabled?this.disabled:!!this.parent&&this.parent.disabled},isLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:!!this.parent&&this.parent.labelDisabled},checkboxSize(){return this.size?this.size:this.parent?this.parent.size:34},checkboxIconSize(){return this.iconSize?this.iconSize:this.parent?this.parent.iconSize:20},elActiveColor(){return this.activeColor?this.activeColor:this.parent?this.parent.activeColor:"primary"},elShape(){return this.shape?this.shape:this.parent?this.parent.shape:"square"},iconStyle(){let e={};return this.elActiveColor&&this.valueCom&&!this.isDisabled&&(e.borderColor=this.elActiveColor,e.backgroundColor=this.elActiveColor),e.width=this.$u.addUnit(this.checkboxSize),e.height=this.$u.addUnit(this.checkboxSize),e},iconColor(){return this.valueCom?"#ffffff":"transparent"},iconClass(){let e=[];return e.push("u-checkbox__icon-wrap--"+this.elShape),1==this.valueCom&&e.push("u-checkbox__icon-wrap--checked"),this.isDisabled&&e.push("u-checkbox__icon-wrap--disabled"),this.valueCom&&this.isDisabled&&e.push("u-checkbox__icon-wrap--disabled--checked"),e.join(" ")},checkboxStyle(){let e={};return this.parent&&this.parent.width&&(e.width=this.parent.width,e.flex=`0 0 ${this.parent.width}`),this.parent&&this.parent.wrap&&(e.width="100%",e.flex="0 0 100%"),e}},mounted(){this._emitEvent()},watch:{valueCom:{handler:function(e,t){this._emitEvent()}}},methods:{_emitEvent(){let e={value:this.valueCom,name:this.name};this.parent&&this.parent.emitEvent&&this.parent._emitEvent(e)},onClickLabel(){this.isLabelDisabled||this.isDisabled||this.setValue()},toggle(){this.isDisabled||this.setValue()},emitEvent(){let e={value:!this.valueCom,name:this.name};this.$emit("change",e),this.parent&&this.parent.emitEvent&&this.parent.emitEvent(e)},setValue(){let e=this.valueCom,t=0;if(this.parent&&this.parent.children&&this.parent.children.map((e=>{e.value&&t++})),1==e)this.emitEvent(),this.$emit("input",!e),this.$emit("update:modelValue",!e);else{if(this.parent&&t>=this.parent.max)return this.$u.toast(`最多可选${this.parent.max}项`);this.emitEvent(),this.$emit("input",!e),this.$emit("update:modelValue",!e)}}}},[["render",function(r,c,d,h,m,p){const f=M(e("u-icon"),P),b=u;return t(),l(b,{class:"u-checkbox",style:o([p.checkboxStyle])},{default:a((()=>[i(b,{class:s(["u-checkbox__icon-wrap",[p.iconClass]]),onClick:p.toggle,style:o([p.iconStyle])},{default:a((()=>[i(f,{class:"u-checkbox__icon-wrap__icon",name:"checkbox-mark",size:p.checkboxIconSize,color:p.iconColor},null,8,["size","color"])])),_:1},8,["onClick","class","style"]),i(b,{class:"u-checkbox__label",onClick:p.onClickLabel,style:o({fontSize:r.$u.addUnit(d.labelSize)})},{default:a((()=>[n(r.$slots,"default",{},void 0,!0)])),_:3},8,["onClick","style"])])),_:3},8,["style"])}],["__scopeId","data-v-5a6bc387"]]);var F=U({name:"u-checkbox-group",emits:["update:modelValue","input","change"],mixins:[A],props:{value:{type:[String,Number,Array,Boolean],default:""},modelValue:{type:[String,Number,Array,Boolean],default:""},max:{type:[Number,String],default:999},disabled:{type:Boolean,default:!1},name:{type:[Boolean,String],default:""},labelDisabled:{type:Boolean,default:!1},shape:{type:String,default:"square"},activeColor:{type:String,default:"#2979ff"},size:{type:[String,Number],default:34},width:{type:String,default:"auto"},wrap:{type:Boolean,default:!1},iconSize:{type:[String,Number],default:20}},data:()=>({values:[],uFromData:{inputAlign:"left"}}),created(){this.children=[]},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uFromData).map((t=>{this.uFromData[t]=e[t]}))},methods:{emitEvent(e){let t=this.values||[];if(e.value){-1===t.indexOf(e.name)&&t.push(e.name)}else{let l=t.indexOf(e.name);l>-1&&t.splice(l,1)}this.$emit("change",t),this.$emit("input",t),this.$emit("update:modelValue",t),setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),60)},_emitEvent(e){let t=this.values||[];if(e.value){-1===t.indexOf(e.name)&&t.push(e.name)}else{let l=t.indexOf(e.name);l>-1&&t.splice(l,1)}}}},[["render",function(e,i,o,r,c,d){const h=u;return t(),l(h,{class:s(["u-checkbox-group u-clearfix","right"==c.uFromData.inputAlign?"flex-end":""])},{default:a((()=>[n(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])}],["__scopeId","data-v-aa6d1e54"]]);var R=U({__name:"login",setup(s){const o=s;N();const n=b(),U=/^(((1[3456789][0-9]{1})|(15[0-9]{1}))+\d{8})$/,{proxy:A}=D(),R=r(!1),T=r(!1),q=r(!1),G=r(1),H=r(""),K=r("获取验证码"),W=r({width:" 100%",color:"#fff",backgroundColor:"#e64340",fontSize:"36rpx"}),J=c({Mobile:"",code:"",pwd:""}),Q=r("");function X(){let e=v("userId");if(g(),!T.value)return void uni.$u.toast("请预览并同意 用户注册协议 和 隐私协议");const t=J.Mobile,l=J.code;if(!U.test(t))return void uni.$u.toast("手机号输入不正确");if(!l||6!=l.length)return void uni.$u.toast("验证码不正确");const a={Mobile:t,useToken:1,checkCode:l,refManPhone:"",PushId:"",userId:e,MerchantId:H.value};console.log("验证码登录===>",a),_(a).then((e=>{n.commit("userinfo",e.Result),o.new?(location.replace(Q.value),x("isNewUser",!1)):ie(1)})).catch((e=>{}))}function Y(){if(g(),!T.value)return void y({icon:"none",duration:3e3,title:"请预览并同意 用户注册协议 和 隐私协议"});const e=J.Mobile,t=J.pwd;if(!U.test(e))return void y({icon:"none",title:"手机号输入不正确"});if(!t||t.length<6)return void y({icon:"none",title:"请输入正确账号和密码"});const l={username1:e,Password1:k.md5(t).toUpperCase(),useToken:1,PushId:""};w(l).then((e=>{e&&e.Result&&"object"==typeof e.Result?(n.commit("userinfo",e.Result),o.new&&1==o.new?(console.log("登录=A=A=>",o.new),location.replace(Q.value)):(console.log("登录=B=B=>",o.new),ie(1))):uni.$u.toast(e.Message)})).catch((e=>{}))}function Z(){T.value=!T.value}function ee(e){K.value=e}function te(){let e=J.Mobile;if(!U.test(e))return uni.$u.toast("手机号输入不正确"),!1;if(L("check",e).over)return void uni.$u.toast("该手机号验证码获取过于频繁，请稍后再试！",3e3);let t={mobile:e,validation:""};console.log(A.$refs),A.$refs.uCode.canGetCode?(uni.$u.toast("正在获取验证码"),C(t).then((e=>{S(),A.$refs.uCode.start()})).catch((e=>{}))):uni.$u.toast("倒计时结束后再发送")}function le(e){window.location.href=e}function ae(e){g(),G.value=e}function ie(e=1){$({delta:e})}return d(J),j((e=>{console.log("跳转回连接=====>",e),e&&"true"==e.new&&(G.value=0),o.url&&o.url.indexOf("MerchantId")<0?(Q.value=`${o.url}&MerchantId=${o.MerchantId}`,H.value=o.MerchantId):(Q.value=`${o.url}`,H.value=o.url.split("MerchantId=")[1]||"")})),(s,n)=>{const r=u,c=M(e("u-field"),B),d=M(e("u-button"),E),b=M(e("u-verification-code"),I),v=M(e("u-checkbox"),O),g=M(e("u-checkbox-group"),F),_=z,x=V,y=M(e("u-icon"),P),k=h;return t(),l(k,{class:"page swiper",current:G.value,"indicator-dots":!1,autoplay:!1,vertical:!1,"display-multiple-items":"1","disable-touch":!0},{default:a((()=>[i(x,{class:"flex flex-column justify-center align-center"},{default:a((()=>[o.new&&"undefined"!=o.new?(t(),l(r,{key:0,class:"text-center"},{default:a((()=>[i(r,{class:"title font-lg font-weight-bold mb-1"},{default:a((()=>[m("注册")])),_:1}),i(r,{class:"title font-small mb-2 text-light-9"},{default:a((()=>[m("为获得完整体验，请你使用手机号进行注册")])),_:1})])),_:1})):(t(),l(r,{key:1,class:"text-center"},{default:a((()=>[i(r,{class:"title font-lg font-weight-bold mb-1"},{default:a((()=>[m("登录")])),_:1}),i(r,{class:"title font-small mb-2 text-light-9"},{default:a((()=>[m("未注册的手机，验证后即完成注册")])),_:1})])),_:1})),i(r,{class:"field mb-3"},{default:a((()=>[i(c,{modelValue:J.Mobile,"onUpdate:modelValue":n[0]||(n[0]=e=>J.Mobile=e),label:"手机号",placeholder:"请填写手机号",type:"number",maxlength:"11"},null,8,["modelValue"]),i(c,{modelValue:J.code,"onUpdate:modelValue":n[1]||(n[1]=e=>J.code=e),label:"验证码",placeholder:"请填写验证码",maxlength:"6"},{right:a((()=>[i(d,{class:"codeBtn",size:"mini",onClick:te},{default:a((()=>[m(p(K.value),1)])),_:1})])),_:1},8,["modelValue"]),i(b,{ref:"uCode",onChange:ee},null,512)])),_:1}),i(d,{loading:R.value,"custom-style":W.value,class:"login-btn font-sm",ripple:!0,"throttle-time":800,onClick:n[2]||(n[2]=e=>s.$u.throttle(X,2e3,!0))},{default:a((()=>[m("登录")])),_:1},8,["loading","custom-style"]),i(r,{class:"flex align-center mt-2 mb-3"},{default:a((()=>[i(g,{"active-color":"#fd8b27",shape:"circle"},{default:a((()=>[i(v,{onChange:Z,modelValue:T.value,"onUpdate:modelValue":n[3]||(n[3]=e=>T.value=e)},null,8,["modelValue"])])),_:1}),i(_,{class:"agreeP"},{default:a((()=>[m("点击查看"+p(o.new&&"undefined"!=o.new?"有":"没有"),1)])),_:1}),i(_,{onClick:n[4]||(n[4]=e=>le("http://appwx.xuezhilian.com/xzb/home/news?id=4")),class:"agreeP clickBefore",style:{color:"#fd8b27"}},{default:a((()=>[m(' "用户注册协议" ')])),_:1}),i(_,{class:"agreeP"},{default:a((()=>[m("和")])),_:1}),i(_,{onClick:n[5]||(n[5]=e=>le("http://appwx.xuezhilian.com/xzb/home/news?id=5")),class:"agreeP clickBefore",style:{color:"#fd8b27"}},{default:a((()=>[m(' "隐私声明"')])),_:1})])),_:1}),o.new&&"undefined"!=o.new&&Boolean(`${o.new}`)?f("v-if",!0):(t(),l(r,{key:2,class:"changeLogin w-100"},{default:a((()=>[i(_,{onClick:n[6]||(n[6]=e=>ae(1)),class:"font-small",style:{color:"#E06152"}},{default:a((()=>[m("账号密码登录")])),_:1}),i(_,{class:"font-small",style:{color:"#999"}})])),_:1}))])),_:1}),i(x,{class:"flex flex-column justify-center align-center"},{default:a((()=>[i(r,{class:"text-center"},{default:a((()=>[i(r,{class:"title font-lg font-weight-bold mb-1",onClick:ee},{default:a((()=>[m("登录注册")])),_:1}),i(r,{class:"title font-small mb-2 text-light-9"},{default:a((()=>[m("未注册的手机，验证后即完成注册")])),_:1})])),_:1}),i(r,{class:"field mb-3"},{default:a((()=>[i(c,{modelValue:J.Mobile,"onUpdate:modelValue":n[7]||(n[7]=e=>J.Mobile=e),label:"手机号",placeholder:"请填写手机号",type:"number",maxlength:"11"},null,8,["modelValue"]),i(c,{modelValue:J.pwd,"onUpdate:modelValue":n[9]||(n[9]=e=>J.pwd=e),label:"密码",placeholder:"请填写密码",type:q.value?"text":"password"},{right:a((()=>[i(y,{name:"eye-fill",color:"#ccc",size:"28",onClick:n[8]||(n[8]=e=>q.value=!q.value)})])),_:1},8,["modelValue","type"])])),_:1}),i(d,{loading:R.value,"custom-style":W.value,class:"login-btn font-sm",ripple:!0,"throttle-time":800,onClick:n[10]||(n[10]=e=>s.$u.throttle(Y,2e3,!0))},{default:a((()=>[m("登录")])),_:1},8,["loading","custom-style"]),i(r,{class:"flex align-center mt-2 mb-3"},{default:a((()=>[i(g,{"active-color":"#fd8b27",shape:"circle"},{default:a((()=>[i(v,{onChange:Z,modelValue:T.value,"onUpdate:modelValue":n[11]||(n[11]=e=>T.value=e)},null,8,["modelValue"])])),_:1}),i(_,{class:"agreeP"},{default:a((()=>[m("点击查看")])),_:1}),i(_,{onClick:n[12]||(n[12]=e=>le("http://appwx.xuezhilian.com/xzb/home/news?id=4")),class:"agreeP clickBefore",style:{color:"#fd8b27"}},{default:a((()=>[m(' "用户注册协议" ')])),_:1}),i(_,{class:"agreeP"},{default:a((()=>[m("和")])),_:1}),i(_,{onClick:n[13]||(n[13]=e=>le("http://appwx.xuezhilian.com/xzb/home/news?id=5")),class:"agreeP clickBefore",style:{color:"#fd8b27"}},{default:a((()=>[m(' "隐私声明"')])),_:1})])),_:1}),i(r,{class:"changeLogin w-100"},{default:a((()=>[i(_,{onClick:n[14]||(n[14]=e=>ae(0)),class:"font-small",style:{color:"#E06152"}},{default:a((()=>[m("验证码登录")])),_:1}),i(_,{class:"font-small",style:{color:"#999"}})])),_:1})])),_:1})])),_:1},8,["current"])}}},[["__scopeId","data-v-5dd9e10f"]]);export{R as default};
