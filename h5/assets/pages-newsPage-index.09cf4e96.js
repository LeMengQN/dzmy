import{a as e,r as t,t as a,o as s,s as l,d as o,al as r,aB as n,f as i,g as d,w as c,n as u,i as f,u as m,p,q as g,F as y,j as x,k as w,S as h,l as C,m as v,E as _,C as I,D as j,y as k}from"./index.1a866322.js";import{b as G}from"./uni-app.es.5638d019.js";import"./index.0e6263ad.js";import{u as T}from"./useState.33e874ff.js";import{w as b}from"./wechatSdk.8caabd54.js";import{t as A}from"./tabar.9597bd6f.js";import{_ as M}from"./plugin-vue_export-helper.21dcd24c.js";import"./methods.10d71805.js";/* empty css                                                          */var J=M({__name:"index",setup(M){const J=M,E=e(50);T(["islogin","userinfo","MerchantId"]);const N=t({imgArr:[],newsArr:[]}),{imgArr:P,newsArr:z}=a(N),F=e(20),S=e(2),$=e(1);function R(e){let t={MerchantId:J.MerchantId,PageIndex:e,PageSize:F.value};o(t).then((t=>{const a=t.Result;console.log("分页===>",a),1==e.value?($.value=t.Total,N.newsArr=a):N.newsArr=N.newsArr.concat(a),X()})).catch((e=>{}))}function U(e){let t={PageIndex:e,PageSize:F.value,SubCategoryId:"",TypeId:"",ReviewFlag:1,MerchantId:J.MerchantId};n(t).then((t=>{const a=t.Result;1==e.value?($.value=t.Total,N.newsArr=a):N.newsArr=N.newsArr.concat(a),X()})).catch((e=>{}))}function D(e,t,a){_({url:`../editor/index?CategoryId=${t.CategoryId}&Id=${t.Id}&newsTitle=${J.newsTitle}&Code=${J.Code}&MerchantId=${J.MerchantId}`})}function X(){let e=window.location.href;console.log("分享信息==>",J.Code),b({share_title:"JGGGMENU"==J.Code?"机构通知":"家校共育",share_desc:"家校合力，共建孩子未来",share_link:e,share_cover:N.imgArr[0].Img||""})}s((()=>{!function(){let e={carouselName:`news-${J.Code}`};r(e).then((e=>{const t=e.Result;Array.isArray(t)&&(N.imgArr=t)})).catch((e=>{}))}(),"JGGGMENU"==J.Code?R(1):U(1),l({title:"JGGGMENU"==J.Code?"机构通知":"家校共育"})})),G((()=>{let e=S.value++;console.log("触底",e),"JGGGMENU"==J.Code?R(e):U(e)}));const Y=e=>{E.value=e,console.log("bar高度===>",e)};return(e,t)=>{const a=I,s=j,l=h,o=f,r=k;return i(),d(o,{class:"page overflow-hidden",style:u(`padding-bottom: ${E.value+50}px;`)},{default:c((()=>[m(P).length>0?(i(),d(l,{key:0,class:"swiperDiv","indicator-color":"#E3E3E3","indicator-active-color":"#F68316",circular:"","indicator-dots":m(P).length>1,autoplay:"",interval:6e3,duration:1e3},{default:c((()=>[(i(!0),p(y,null,g(m(P),((e,t)=>(i(),d(s,{key:t,class:"centerDiv"},{default:c((()=>[w(a,{src:e.Img,mode:"scaleToFill",class:"swiperCDiv"},null,8,["src"])])),_:2},1024)))),128))])),_:1},8,["indicator-dots"])):x("v-if",!0),m(P).length>0?(i(),d(o,{key:1,style:{width:"750rpx",height:"15rpx","background-color":"#F5F4F9"}})):x("v-if",!0),"JXGY"===J.Code||"JZKT"===J.Code?(i(),d(o,{key:2,class:"mt-2"},{default:c((()=>[(i(!0),p(y,null,g(m(z),((t,s)=>(i(),d(o,{class:"flex mb-2 newitem",style:{flex:"1","flex-direction":"row","justify-content":"space-between"},key:t.CategoryId,onClick:a=>D(e.NewCode,t)},{default:c((()=>[w(a,{src:t.CoverImgUrl,mode:"",class:"jyImg","lazy-load":!0},null,8,["src"]),w(o,{class:"flex-1 flex flex-column justify-around",style:{"padding-left":"40rpx"}},{default:c((()=>[w(r,{class:"jyP text-ellipsis"},{default:c((()=>[C(v(t.Title),1)])),_:2},1024),"JXGY"===J.Code?(i(),d(r,{key:0,class:"jyP",style:{"font-size":"26rpx","font-weight":"normal",color:"#aaa","padding-top":"10rpx"}},{default:c((()=>[C(v(t.CreateTime.slice(0,10)),1)])),_:2},1024)):x("v-if",!0),x(' <text v-if="props.Code === \'JXGY\'" class="jyP" style="font-size: 26rpx;font-weight: normal;color: #aaa;padding-top:10rpx;">{{ item.OrignRemark }}</text> '),x(' <view v-if="props.Code === \'JZKT\' && item.CreateType == 2"\n\t\t\t\t\t\tstyle="flex-direction: row;align-items: center;margin-top: 15rpx;">\n\t\t\t\t\t\t<image :src="item.Image" mode="" class="merImg"></image>\n\t\t\t\t\t\t<text class="jyP jsH textOverflowClass"\n\t\t\t\t\t\t\tstyle="font-size: 26rpx;font-weight: normal;color: #aaa;text-align:left;padding-top:0;width: 300rpx;">{{\n                             "&nbsp;" \n                            }}{{ item.MerchantName || \'商家名称\'  }}</text>\n\t\t\t\t\t</view> ')])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(i(),d(o,{key:3,class:"mt-2"},{default:c((()=>[(i(!0),p(y,null,g(m(z),((t,a)=>(i(),d(o,{class:"flex mb-2 newitem",style:{},key:t.CategoryId,onClick:a=>D(e.NewCode,t)},{default:c((()=>[w(o,{class:"flex flex-column",style:{"padding-left":"40rpx"}},{default:c((()=>[w(r,{class:"font-small"},{default:c((()=>[C(v(t.Title),1)])),_:2},1024),w(r,{class:"",style:{"font-size":"26rpx","font-weight":"normal",color:"#aaa","padding-top":"10rpx"}},{default:c((()=>[C(v(t.CreateTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})),m(z).length>=20?(i(),p(y,{key:4},[x(' <u-loadmore :status="loadStatus" :icon-type="iconType" :load-text="loadText"></u-loadmore> ')],64)):x("v-if",!0),w(m(A),{current:"JXGY"===J.Code||"JZKT"===J.Code?0:3,onReady:Y},null,8,["current"])])),_:1},8,["style"])}}},[["__scopeId","data-v-373c838b"]]);export{J as default};
