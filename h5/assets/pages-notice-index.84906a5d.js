import{r as e,t as a,a as s,o as t,d as o,h as r,al as n,f as l,g as d,w as i,n as c,i as u,p as m,q as f,u as p,F as g,k as h,l as _,m as w,E as x,y}from"./index.1a866322.js";import{b as I}from"./uni-app.es.5638d019.js";import"./index.0e6263ad.js";import{u as v}from"./useState.33e874ff.js";import{t as A}from"./tabar.9597bd6f.js";import{w as b}from"./wechatSdk.8caabd54.js";import"./methods.10d71805.js";/* empty css                                                          */import"./plugin-vue_export-helper.21dcd24c.js";const j={__name:"index",setup(j){const M=j,C=v(["MerchantId","InformationData"]),{MerchantId:k,InformationData:G}=C,N=e({imgArr:[],newsArr:[]}),{imgArr:T,newsArr:$}=a(N),D=s(20),E=s(2),R=s(1),S=s(50);function z(e){let a={MerchantId:M.MerchantId,pageIndex:e,PageSize:D.value};o(a).then((a=>{const s=a.Result;console.log("分页===>",s),e<=1?(R.value=a.Total,N.newsArr=s):N.newsArr=N.newsArr.concat(s),console.log("路由==>",r(G.value))})).catch((e=>{}))}t((()=>{n({carouselName:"news-JGGGMENU"}).then((e=>{const a=e.Result;Array.isArray(a)&&(N.imgArr=a)})).catch((e=>{})),z(1),function(){let e=window.location.href;console.log("路由==>",r(G.value));let a=r(G.value);console.log("自定义分享信息",r(N.InformationData)),b({share_title:a.Name+"的通知",share_desc:a.MainBusiness+"："+a.Address,share_link:e,share_cover:a.Thumbnail})}()})),I((()=>{let e=E.value++;console.log("触底===>"),z(e)}));const J=e=>{S.value=e,console.log("bar高度===>",e)};return(e,a)=>{const s=y,t=u;return l(),d(t,{class:"page",style:c(`padding-bottom: ${S.value+50}px;`)},{default:i((()=>[(l(!0),m(g,null,f(p($),((a,o)=>(l(),d(t,{class:"flex mb-2 newitem",style:{},key:a.CategoryId,onClick:s=>function(e,a,s){x({url:`../editor/index?CategoryId=${a.CategoryId}&Id=${a.Id}&newsTitle=机构通知&Code=JGGGMENU&MerchantId=${M.MerchantId}`})}(e.NewCode,a)},{default:i((()=>[h(t,{class:"flex flex-column",style:{"padding-left":"40rpx"}},{default:i((()=>[h(s,{class:"font-small"},{default:i((()=>[_(w(a.Title),1)])),_:2},1024),h(s,{class:"",style:{"font-size":"26rpx","font-weight":"normal",color:"#aaa","padding-top":"10rpx"}},{default:i((()=>[_(w(a.CreateTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),h(p(A),{current:3,disable:!0,onReady:J})])),_:1},8,["style"])}}};export{j as default};
