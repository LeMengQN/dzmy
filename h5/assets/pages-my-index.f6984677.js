import{r as e,t,a as s,a8 as a,a9 as l,f as n,p as i,j as r,k as d,w as c,F as u,i as o,u as m,g as f,l as A,m as g,q as p,E as h,x,aa as I,C as w,S as k,y as j,v as y,z as U,D as v,a0 as P}from"./index.1a866322.js";import{_}from"./u-icon.1541541b.js";import{o as M,a as b,r as S}from"./uni-app.es.5638d019.js";import{_ as z}from"./u-image.1dd2763f.js";import{h as C,g as J,a as Q,n as R}from"./methods.10d71805.js";import{t as L}from"./tabar.9597bd6f.js";import{u as T}from"./useState.33e874ff.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.0e6263ad.js";/* empty css                                                          */var N=F({__name:"index",setup(F){const N=F,E=T(["islogin","userinfo","wxData"]);console.log("路由===>",N);const B=e({StudentId:"",studentList:[],studentObj:{},newMsgArr:[],jycontent:{}}),{studentList:O,StudentId:G,studentObj:H,newMsgArr:D,jycontent:K}=t(B),{islogin:$,userinfo:V,wxData:Z}=E,Y=s(50),q=s("");C();const W=s([{text:"我的班级",imgUrl:"mylist_bj",url:"classes",idNeed:!0},{text:"我的课程",imgUrl:"mylist_kc",url:"studentClass",idNeed:!0},{text:"我的评价",imgUrl:"mylist_pj",url:"evaluationList"},{text:"课程收藏",imgUrl:"mylist_sc",url:"collect"},{text:"我的奖品",imgUrl:"mylist_yhq",url:"Myluckys"},{text:"我的活动",imgUrl:"mylist_hd",url:"coupon"},{text:"我的订单",imgUrl:"mylist_dd",url:"order"},{text:"我的假条",imgUrl:"mylist_sf",url:"askLeave",idNeed:!0}]);async function X(){let e=V.value.id,t=await B.StudentId,s={UserId:e,StudentId:t};console.log("用户信息==>",t),l(s).then((e=>{if(!e.Result)return B.newMsgArr=[],void(B.jycontent={});let t=e.Result.ImageList?e.Result.ImageList:[];for(let l in t)t[l].ImageUrl=t[l].ImageUrl.replace("D:\\wwwroot\\xzl\\app\\wwwroot","https://app.xuezhilian.com").replace("\\","//");let s=t.concat(t);B.jycontent=e.Result;let a=[];for(let l=0;l<s.length;l+=2)a.push(s.slice(l,l+2));e.Result.ImageList?B.newMsgArr=a:B.newMsgArr=[]})).catch((e=>{}))}function ee(e,t){$.value||e.noLogin?(console.log("要跳转的路径==>",`../${e.url}/index?fromUrl=${e.fromUrl||""}`),e.url&&h({url:`./${e.url}/index?fromUrl=${e.fromUrl||""}&MerchantId=${N.MerchantId}`})):J({data:"index",url:window.location.href},!0)}M((e=>{console.log("我的==>",$.value),q.value=window.location.href,e.MerchantId||location.replace("https://appwx.xuezhilian.com/xzb/index.html#/pages/error/404")})),b((()=>{$.value&&setTimeout((()=>{!function(){let e={merchantId:N.MerchantId};a(e).then((e=>{const t=e.Result;if(Array.isArray(t)&&t.length>0){if(B.studentList=t,B.StudentId=t[0].Id,B.studentObj.Id){const e=t.findIndex((e=>e.Id==B.studentObj.Id));B.studentObj=-1===e?t[0]:t[e]}else B.studentObj=t[0];X()}else B.studentList=[],B.studentObj={}})).catch((e=>{}))}()}),500)}));const te=e=>{Y.value=e,console.log("bar高度===>",e)};function se(){$.value?h({url:"./lmessage?studentid="+B.StudentId+"&MerchantId="+N.MerchantId}):J({url:window.location.href},!0)}return(e,t)=>{const s=S(x("u-icon"),_),a=o,l=S(x("u-image"),z),M=I,b=w,C=v,T=k,F=j;return n(),i(u,null,[r(' <view :style="`padding-bottom: ${pbHeight + 50}px;`"> '),d(a,null,{default:c((()=>[d(a,{class:"my_head"},{default:c((()=>[d(a,{class:"head_icon flex justify-end"},{default:c((()=>[d(s,{name:"plus-circle",color:"#fff",size:"48",onClick:t[0]||(t[0]=e=>ee({url:"student",fromUrl:""}))}),d(s,{name:"setting",color:"#fff",size:"48",class:"ml-2 mr-2",onClick:t[1]||(t[1]=e=>ee({url:"setUp"}))}),r(' <u-icon name="chat" color="#fff" size="48"></u-icon> ')])),_:1}),d(a,{class:"avatar-con flex align-center justify-between"},{default:c((()=>[d(l,{class:"AvatarImg",width:"100",height:"100",src:m(H).AvatarImg||m(Z).headimgurl,"error-icon":"account-fill",shape:"circle",mode:"aspectFill"},null,8,["src"]),d(M,{class:"scrollContainer w-80","scroll-x":"","show-scrollbar":!1},{default:c((()=>[m($)?(n(),f(a,{key:0,class:"scroll-view"},{default:c((()=>[m(O).length<=0?(n(),f(a,{key:0,class:"StudentName StudentName-true"},{default:c((()=>[A(g(m(Z).nickname),1)])),_:1})):r("v-if",!0),(n(!0),i(u,null,p(m(O),((e,t)=>(n(),f(a,{class:y(["StudentName",m(G)==e.Id?"StudentName-true":""]),onClick:t=>function(e){B.studentObj=e,B.StudentId=e.Id,X(),console.log("点击元宝this.StudentId===",e)}(e),key:t},{default:c((()=>[A(g(e.StudentName),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):(n(),f(a,{key:1,onClick:t[2]||(t[2]=e=>m(J)({url:q.value},!0)),class:"text-white font-small"},{default:c((()=>[A("登录 / 注册 ")])),_:1}))])),_:1})])),_:1}),d(a,{class:"lmassage"},{default:c((()=>[d(a,{class:"image-con flex justify-center mt-3 position-relative"},{default:c((()=>[d(b,{class:"jy-back",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAp4AAADwBAMAAABbOXmjAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAVUExURUdwTCUlJSkpKSQkJP///+bm5mZmZpP6tvsAAAADdFJOUwCkKAWoFckAAAIkSURBVHja7djdbYJgGIbhV1wA6gI0LiCwAnYC4wR1/xUK8nPSxMTy2nhw3UdPjDHmSoBPI8aKqtO2qjrWPnEk9LFw7likVE6cxQFFSs10yR9JJNXePTmkVa93z1vf99fuwfwe5tdr3/DMfLOvM8/xDjrdPS/DC+fuwezHXvuGZ+abfZ15NsPT6Nenm3+f62GJRsosY08jcZ6W0xKNlNnOjyMaObPhmezZ0cicPF/j6TyfMxdPvzdzpn9DcuPJkydP8eTJUzx58hRPnjx5iidPnuLJk6d48uTJUzx58hRPnjzFkydPnuLJk6d48uQpnjx5iidPnjzFkydP8eTJUzx58uQpnjx5iidPnuLJkydP8eTJUzx58hRPnjx5iidPnuLJk6d48uQpnjx58hRPnjzFkydP8eTJk6d48uQpnjx5iidPnjzFkydP8eTJUzx58uQpnjx5iidPnuLJk6d48uTJUzx58hRPnjzFkydPnuLJk6d48uQpnjx58hRPnjzFkydP8eTJk6d48uQpnjx5iidPnuLJkydP8eTJUzx58hRPnjx5iidPnuLJk6d48uTJUzx58hRPnjzF8788b33fX83Nc/G8DC+czc1z8ezHzM2TZ7LngUbibHgmex5pJM429jQS5yl2NBJnGQWNxFnH/EByGs+YTcR8wfu1mDHLwbPwJ0Zaw+Uey4lJm2vj3oFESk09ee5QpFRGAM3rI9aKCsfGquli/wHj+owMeCfFrAAAAABJRU5ErkJggg=="}),m(D).length<=0?(n(),f(a,{key:0,class:"swiper swiper-view flex justify-around",onClick:t[3]||(t[3]=e=>se())},{default:c((()=>[d(b,{src:"./assets/mylist_zp1.f261ffeb.png",class:"back4"}),d(b,{src:"./assets/mylist_zp2.c4c06bcf.png",class:"back4"})])),_:1})):(n(),f(T,{key:1,autoplay:!0,duration:800,"indicator-dots":!1,circular:!0,class:"swiper"},{default:c((()=>[(n(!0),i(u,null,p(m(D),((e,t)=>(n(),f(C,{key:t},{default:c((()=>[d(a,{class:"swiper-view flex justify-around"},{default:c((()=>[U("img",{src:e[0].ImageUrl,alt:"",class:"back4"},null,8,["src"]),U("img",{src:e[1].ImageUrl,alt:"",class:"back4"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}))])),_:1}),d(a,{class:"centerDiv input-box flex mt-2",onClick:t[4]||(t[4]=e=>se())},{default:c((()=>[m(K).Contents?(n(),f(F,{key:0,style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},class:"disP"},{default:c((()=>[A(g(m(K).Contents),1)])),_:1})):(n(),f(F,{key:1,class:"disP"},{default:c((()=>[A("记录宝贝的点滴成长！")])),_:1})),d(b,{class:"push-msg",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhBAMAAAClyt9cAAAAMFBMVEUAAAAhISMiIiQhISQoKCkkJCciIiUjIyQhISMhISMhISMhISMhISQiIiQiIiQhISOMjP2RAAAAD3RSTlMA8W+xESlCNYTQwt2XVmMdj014AAAAz0lEQVQoz4XQvQnCABCG4Q/BKIgBwZ8y4gIpLG2ygBBdQIMDqCNYWNvYR0TrNCksLBQcIOAAuoEEQYkRzsQmdxHMWx5PcXdIUjp7E6IFUR28Iu2OviHIHQVqCrIC7AMn5MYTTuzQKJPHyKtLrhVwssEl1GqcGFDJTzbMRQQKJ3pEYGWTqSBLoKA1GAm+ZPKH3NJE/SHjmPQYge0CeU4U8mIyZFeHMeEvL71TBIMHVEGgV8+aIHAqRFvwNArmEM3WJrIatUUnwCHRE+i3RFd8AGgcZ2f6X03BAAAAAElFTkSuQmCC"})])),_:1})])),_:1})])),_:1}),d(a,{class:"disDiv w-100"},{default:c((()=>[(n(!0),i(u,null,p(W.value,((e,t)=>(n(),f(a,{onClick:t=>function(e,t){Q((()=>{if($.value){if(console.log("我的子栏目==>",e),e.idNeed){const{Id:t,StudentName:s,AvatarImg:a,Sex:l}=B.studentObj;if(!t){switch(e.url){case"classes":P({title:"你还没有加入任何班级！",icon:"none"});break;case"studentClass":P({title:"你还没有购买任何课程！",icon:"none"});break;case"askLeave":P({title:"请添加学员！",icon:"none"})}return}return void R(`../${e.url}/index?StudentId=${t||""}&StudentName=${s||""}&Sex=${l||""}&MerchantId=${N.MerchantId}`)}h({url:`../${e.url}/index?MerchantId=${N.MerchantId}`,success:e=>{},fail:e=>{console.log("挑战失败"),uni.$u.toast("正在努力开发中...")}})}else J({url:window.location.href},!0)}))}(e),key:t,class:"centerDiv clickBefore w-25 flex-wrap","hover-class":"hover-class"},{default:c((()=>[d(b,{src:`../../static/icon/${e.imgUrl}.png`,mode:"",class:"menuP"},null,8,["src"]),d(F,{class:"disP"},{default:c((()=>[A(g(e.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),d(m(L),{current:4,disable:!0,onReady:te})])),_:1})],2112)}}},[["__scopeId","data-v-5577ee8f"]]);export{N as default};
