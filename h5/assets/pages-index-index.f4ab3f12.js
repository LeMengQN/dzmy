import{r as e,t as a,a as t,$ as l,A as s,o,I as i,s as n,G as c,b as r,c as d,d as u,e as f,f as m,g as p,w as g,n as _,h,i as w,j as b,k as y,u as x,l as T,m as v,p as I,q as D,F as k,v as C,x as G,S as A,y as M,z as j,B as N,C as L,D as $,E as K}from"./index.1a866322.js";import{_ as U}from"./u-image.1dd2763f.js";import{o as E,a as z,r as R}from"./uni-app.es.5638d019.js";import{_ as B}from"./u-icon.1541541b.js";import{n as J,c as S,a as F}from"./methods.10d71805.js";import{u as P}from"./useState.33e874ff.js";import{t as X}from"./tabar.9597bd6f.js";import{w as q}from"./wechatSdk.8caabd54.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.0e6263ad.js";/* empty css                                                          */var V=O({__name:"index",setup(O){const V=P(["islogin","userinfo","MerchantId","wxData"]),{islogin:Y,userinfo:H,MerchantId:Q,wxData:W}=V,Z=e({GetActivityTop2Date:{},GetLuckyDrawTop2Date:{},GetAlbumListTop4Date:{},InformationData:{},GetAnnounceListData:[],optionData:{}}),{GetActivityTop2Date:ee,GetLuckyDrawTop2Date:ae,GetAlbumListTop4Date:te,InformationData:le,GetAnnounceListData:se,optionData:oe}=a(Z);t(5);const ie=t(50),ne=t(200),ce=t(0);t(""),t(""),t(0),t(["#ffc454","#ffb409","#fd8b27"]);const re=t([{Name:"机构介绍",ImgUrl:"../../static/icon/jgjs.png",url:"editor",Code:"XXJSMENU"},{Name:"课程介绍",ImgUrl:"../../static/icon/kcjs.png",url:"editor",Code:"KCJSMENU"},{Name:"家校共育",ImgUrl:"../../static/icon/jxgy.png",url:"newsPage",Code:"JXGY"},{Name:"机构通知",ImgUrl:"../../static/icon/jgtz.png",url:"notice",Code:"JGGGMENU"}]);E((e=>{e&&e.MerchantId?(l.commit("MerchantId",e.MerchantId),Z.optionData=e,function(){ce.value=1;const e={merchantId:Z.optionData.MerchantId};d(e).then((e=>{let a=e.Result;Z.GetActivityTop2Date=a,console.log("活动信息",a);for(let l in Z.GetActivityTop2Date){Z.GetActivityTop2Date[l].TimeK="";var t=Date.now();let e=new Date(Z.GetActivityTop2Date[l].BeginTime).getTime();let a=new Date(Z.GetActivityTop2Date[l].EndTime).getTime();t<e?Z.GetActivityTop2Date[l].TimeK="未开始":t>a?Z.GetActivityTop2Date[l].TimeK="已结束":!(t>e&&t<a)||(Z.GetActivityTop2Date[l].TimeK="进行中")}})).catch((e=>{}))}(),function(){ce.value=0;const e={merchantId:Z.optionData.MerchantId};r(e).then((e=>{let a=e.Result;Z.GetLuckyDrawTop2Date=a,console.log("抽奖信息==>",a);for(let l in Z.GetLuckyDrawTop2Date){Z.GetLuckyDrawTop2Date[l].TimeK="";var t=Date.now();let e=new Date(Z.GetLuckyDrawTop2Date[l].BeginTime).getTime();let a=new Date(Z.GetLuckyDrawTop2Date[l].EndTime).getTime();t<e?Z.GetLuckyDrawTop2Date[l].TimeK="未开始":t>a?Z.GetLuckyDrawTop2Date[l].TimeK="已结束":!(t>e&&t<a)||(Z.GetLuckyDrawTop2Date[l].TimeK="进行中")}})).catch((e=>{}))}(),async function(){const e={MerchantId:Z.optionData.MerchantId};let a=await i(e),t=a.Result.Image;a.Result.Image=t.split(","),console.log("请求数据=====>",t.split(",")),Z.InformationData=a.Result,n({title:a.Result.Name}),function(){let e=window.location.href,a=h(Z.InformationData);console.log("自定义分享信息",h(Z.InformationData)),q({share_title:a.Name,share_desc:a.MainBusiness+"："+a.Address,share_link:e,share_cover:a.Thumbnail})}(),console.log("hei",le)}(),async function(){const e={merchantId:Z.optionData.MerchantId};let a=await c(e);Z.GetAlbumListTop4Date=a.Result,console.log("baga",a)}(),async function(){const e={MerchantId:Z.optionData.MerchantId,PageIndex:1,PageSize:5};let a=await u(e);Z.GetAnnounceListData=a.Result}()):location.replace("https://appwx.xuezhilian.com/xzb/index.html#/pages/error/404")})),z((()=>{s(Z.optionData.MerchantId)})),o((()=>{console.log("InformationData===>",le.value)}));const de=f((()=>function(e){return e?e.substring(0,10):""}));const ue=e=>{ie.value=e,console.log("bar高度===>",e)};return(e,a)=>{const t=R(G("u-image"),U),l=w,s=R(G("u-icon"),B),o=L,i=$,n=A,c=M;return m(),p(l,{class:"page",style:_(`padding-bottom: ${ie.value+50}px;`)},{default:g((()=>[b(' <u-navbar :is-back="false" title-color="#ffffff" :background="{ background: \'#fd8b27\' }"\r\n\t\t\t:title="InformationData.Name" title-width="600"></u-navbar> '),y(l,{class:"head flex align-center justify-between"},{default:g((()=>[y(t,{width:"120",height:"120",src:x(le).Thumbnail,shape:"circle",mode:"aspectFill"},null,8,["src"]),y(l,{class:"head-con flex flex-column justify-between"},{default:g((()=>[y(l,{class:"head-name font-small"},{default:g((()=>[T(v(x(le).Name),1)])),_:1}),b(' <view class="head-add font-smallest text-light-A text-ellipsis">{{InformationData.Address}}</view> '),b(' <u-rate v-model="rateValue" :colors="rateColors" disabled></u-rate> ')])),_:1}),y(s,{name:"phone",color:"#fd8b27",size:"38",onClick:a[0]||(a[0]=e=>{return a=x(le).telephone,void(3085==Z.optionData.MerchantId?S("4000366985"):S(a));var a})}),b(' <u-icon name="chat" color="#fd8b27" size="38"></u-icon> ')])),_:1}),y(l,{class:"swiper mt-2"},{default:g((()=>[y(l,{class:"swiper-vel"},{default:g((()=>[y(n,{style:_(`height:${ne.value}px;`),"indicator-dots":!0,circular:!0,"indicator-color":"rgb(227, 227, 227)","indicator-active-color":"#fd8b27",autoplay:"",interval:3e3,duration:1200},{default:g((()=>[(m(!0),I(k,null,D(x(le).Image,((e,a)=>(m(),p(i,{key:e,onClick:e=>{console.log("hei",le.value)}},{default:g((()=>[y(l,{class:"flex justify-center rounded-lg"},{default:g((()=>[y(o,{id:"iamnode",class:"swiper-image",src:e,mode:"widthFix",onLoad:e=>0==a?void N().select("#iamnode").boundingClientRect((e=>{console.log(e.height),ne.value=e.height})).exec():""},null,8,["src","onLoad"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])])),_:1}),y(l,{class:"swiper-news flex align-center mt-2 mb-1 pl-1 pr-1 box-border"},{default:g((()=>[y(l,{class:"flex align-center font-smaller pr-2 box-border border-right"},{default:g((()=>[y(s,{name:"volume-up-fill",color:"#fd8b27",size:"38"}),y(c,{class:"color-main"},{default:g((()=>[T("公告")])),_:1})])),_:1}),y(l,{class:"news-swiper flex-1 pl-1 box-border"},{default:g((()=>[y(n,{style:{height:"70rpx"},"indicator-dots":!1,autoplay:!0,interval:4e3,duration:800,vertical:!0,circular:!0,"disable-touch":!0},{default:g((()=>[(m(!0),I(k,null,D(x(se),((e,a)=>(m(),p(i,{key:e.CreateTime},{default:g((()=>[y(l,{class:"swiper-item_news flex align-center justify-between",onClick:a=>function(e){e.Id>0&&F((()=>{J(`../editor/index?Id=${e.Id}&newsTitle=通知公告&Code=JGGGMENU`)}))}(e)},{default:g((()=>[y(c,{class:"text-ellipsis"},{default:g((()=>[T(v(e.Title),1)])),_:2},1024),y(c,null,{default:g((()=>[T(v(x(de)(e.CreateTime)),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1}),y(l,{class:"content"},{default:g((()=>[y(l,{class:"menu-tab flex justify-between align-center w-100 pt-2 pb-1 pl-2 pr-2 box-border"},{default:g((()=>[(m(!0),I(k,null,D(re.value,((e,a)=>(m(),p(l,{class:"flex flex-column justify-between align-center",key:a,onClick:a=>function(e,a){let t={Url:e.url?e.url:"newsPage",Code:e.Code,Id:e.Id};"XXJSMENU"==t.Code||"KCJSMENU"==t.Code||"JGGGMENU"==t.Code?t.Id=Q.value:console.log("newsChildArr是什么===>",e),console.log("机构首页跳转",Q.value,t),F((()=>{K({url:`../${t.Url}/index?Code=${t.Code||-1}&Id=${t.Id}&Name=${e.Name}&newsTitle=${e.Name}&MerchantId=${Q.value}`})}))}(e)},{default:g((()=>[y(o,{class:"menu-tab-img",src:e.ImgUrl+"?v=2"},null,8,["src"]),y(c,{class:"mt-1 font-smallest"},{default:g((()=>[T(v(e.Name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),y(l,{class:"class-list w-100 flex flex-wrap mt-1"},{default:g((()=>[(m(!0),I(k,null,D(x(le).Products,((e,a)=>(m(),p(l,{class:"flex flex-column w-50 p-1 box-border pb-1",key:a,onClick:a=>x(J)(`/pages/course/courseDetail?Id=${e.Id}&MerchantId=${Z.optionData.MerchantId}`)},{default:g((()=>[y(o,{class:"class-list_img rounded-lg",src:e.Picture,mode:"scaleToFill"},null,8,["src"]),y(c,{class:"white-space-n font-smaller pt-1 pb-1"},{default:g((()=>[T(v(e.Title),1)])),_:2},1024),y(l,{class:"flex justify-between align-center color-main"},{default:g((()=>[y(c,{class:"price"},{default:g((()=>[T("￥"+v(e.Price),1)])),_:2},1024),y(l,{class:"buy-btn"},{default:g((()=>[T("购买")])),_:1})])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),y(l,{class:"typogra"},{default:g((()=>[y(l,{class:"Listactiv"},{default:g((()=>[y(l,{class:C(["title mt-3 box-border font-sm",["nav-item",0==ce.value?"nav-item-true":""]]),onClick:a[1]||(a[1]=e=>ce.value=0)},{default:g((()=>[T("抽奖 ")])),_:1},8,["class"]),y(l,{class:C(["title mt-3 box-border font-sm",["nav-item",1==ce.value?"nav-item-true":""]]),onClick:a[2]||(a[2]=e=>ce.value=1)},{default:g((()=>[T("活动 ")])),_:1},8,["class"])])),_:1}),y(s,{name:"arrow-right",color:"#d6d6d6",size:"32",style:{"margin-top":"24rpx"},onClick:a[3]||(a[3]=e=>x(J)(`/pages/gift/index?MerchantId=${x(Q)}&navIndex=${ce.value}`))})])),_:1}),0==ce.value&&x(ae)?(m(),p(l,{key:0},{default:g((()=>[(m(!0),I(k,null,D(x(ae),((e,a)=>(m(),p(l,{class:"class-list flex marbts",key:a,onClick:a=>x(J)(`/pages/Bingogame/Luckydraw?Id=${e.Id}&MerchantId=${x(Q)}`)},{default:g((()=>[y(l,{class:"flex flex-column w-50 p-1 box-border pb-1"},{default:g((()=>[y(o,{class:"class-list_imgs rounded-lg",src:e.Img,mode:"scaleToFill"},null,8,["src"])])),_:2},1024),y(l,null,{default:g((()=>[y(l,{class:"Awds-1"},{default:g((()=>[T(v(e.Name),1)])),_:2},1024),y(l,{class:"Awds-2"},{default:g((()=>[T(" 抽奖开始: "+v(e.BeginTimes),1)])),_:2},1024),y(l,{class:"Awds-2"},{default:g((()=>[T(" 抽奖截止: "+v(e.EndTimes),1)])),_:2},1024),y(l,null,{default:g((()=>[y(l,null,{default:g((()=>[j("p",{class:"Awds-3"},v(e.TimeK),1)])),_:2},1024),y(l,{class:"flex justify-between widthp"},{default:g((()=>[y(l,{class:""},{default:g((()=>[j("p",{class:"Awds-4"},v(e.LKUserCount)+" 人已参与",1)])),_:2},1024),"已结束"!==e.TimeK?(m(),p(l,{key:0,class:"color-main mainType"},{default:g((()=>[T(" 去抽奖 ")])),_:1})):b("v-if",!0),"已结束"==e.TimeK?(m(),p(l,{key:1,class:"color-main mainTypetys"},{default:g((()=>[T(v("已结束"==e.TimeK?"已结束":"期待哦"),1)])),_:2},1024)):b("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):b("v-if",!0),1==ce.value&&x(ee)?(m(),p(l,{key:1},{default:g((()=>[(m(!0),I(k,null,D(x(ee),((e,a)=>(m(),p(l,{class:"class-list flex marb",key:a,onClick:a=>x(J)(`/pages/Bingogame/activeall?Id=${e.Id}&MerchantId=${x(Q)}`)},{default:g((()=>[y(l,{class:"flex flex-column w-50 p-1 box-border pb-1"},{default:g((()=>[y(o,{class:"class-list_imgs rounded-lg",src:e.Img,mode:"scaleToFill"},null,8,["src"])])),_:2},1024),y(l,null,{default:g((()=>[y(l,{class:"Awds-1"},{default:g((()=>[T(v(e.Title),1)])),_:2},1024),y(l,{class:"Awds-2"},{default:g((()=>[T(" 活动开始: "+v(e.BeginTimes),1)])),_:2},1024),y(l,{class:"Awds-2"},{default:g((()=>[T(" 活动截止: "+v(e.EndTimes),1)])),_:2},1024),y(l,null,{default:g((()=>[y(l,null,{default:g((()=>[j("p",{class:"Awds-3"},v(e.TimeK),1)])),_:2},1024),y(l,{class:"flex justify-between widthp"},{default:g((()=>[y(l,null,{default:g((()=>[j("p",{class:"Awds-4"},v(e.MKUserCount)+" 人已参与",1)])),_:2},1024),"已结束"!==e.TimeK&&0==e.IsApply?(m(),p(l,{key:0,class:"color-main mainType"},{default:g((()=>[T(" 去报名 ")])),_:1})):b("v-if",!0),"已结束"!==e.TimeK&&0!=e.IsApply?(m(),p(l,{key:1,class:"color-main mainTypeLO"},{default:g((()=>[T(" 已报名 ")])),_:1})):b("v-if",!0),"已结束"==e.TimeK?(m(),p(l,{key:2,class:"color-main mainTypetys"},{default:g((()=>[T(v("已结束"==e.TimeK?"已结束":"期待哦"),1)])),_:2},1024)):b("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):b("v-if",!0),y(l,{class:"typogra"},{default:g((()=>[y(l,{class:"title font-sm font-weight-bold mt-3 pl-2 box-border"},{default:g((()=>[T("相册")])),_:1}),y(s,{name:"arrow-right",color:"#d6d6d6",size:"32",style:{"margin-top":"24rpx"},onClick:a[4]||(a[4]=e=>x(J)(`/pages/photoes/index?MerchantId=${x(Q)}`))})])),_:1}),y(l,{class:"class-list w-100 flex flex-wrap mt-1"},{default:g((()=>[(m(!0),I(k,null,D(x(te),((e,a)=>(m(),p(l,{class:"flex flex-column w-50 p-1 box-border pb-1",key:a,onClick:a=>x(J)(`/pages/photoes/photolist?Id=${e.Id}&MerchantId=${x(Q)}&Name=${e.Name}`)},{default:g((()=>[y(o,{class:"class-list_img rounded-lg",src:e.CoverImg,mode:"scaleToFill"},null,8,["src"]),y(l,{class:"photo-idx color-main"},{default:g((()=>[y(c,{class:"photo text-ellipsis"},{default:g((()=>[T(v(e.Name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),y(x(X),{current:0,disable:!0,onReady:ue})])),_:1},8,["style"])}}},[["__scopeId","data-v-8a17864c"]]);export{V as default};
