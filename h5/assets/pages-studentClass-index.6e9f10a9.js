import{r as e,t as s,a as t,o as a,s as l,ad as n,bl as u,af as o,f as c,g as r,w as d,i,l as f,j as p,p as m,q as _,u as b,F as x,k as v,m as g,E as h,y as j}from"./index.1a866322.js";import{o as w,a as I,c as y,b as k}from"./uni-app.es.5638d019.js";import{h as T}from"./methods.10d71805.js";import{u as S}from"./useState.33e874ff.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.0e6263ad.js";var C=O({__name:"index",setup(O){const C=O;console.log("路由===>",C),S(["MerchantId","islogin","InformationData"]);const L=e({menuList:[],userObj:{}}),{menuList:$,userObj:D}=s(L),N=t(0);t(10);const M=t(2),P=t(""),B=t(!1);function z(e){n({title:"加载中",mask:!0});let s={Status:P.value,StudentId:L.userObj.StudentId,pageSize:20,pageIndex:e};u(s).then((s=>{const t=s.Result;N.value=s.Total,L.menuList,t&&"object"==typeof t&&t.length>0?(console.log("课程列表==>",typeof t),L.menuList=e<=1?t:L.menuList.concat(t)):B.value=!0,setTimeout((()=>{o()}),500)})).catch((e=>{o()}))}return a((()=>{})),T(),w((e=>{L.userObj=e,l({title:`${e.StudentName}的课程`}),e.MerchantId?z(1):location.replace("https://appwx.xuezhilian.com/xzb/index.html#/pages/error/404")})),I((()=>{console.log("页面出现时")})),y((()=>{console.log("页面准备好时")})),k((()=>{let e=M.value++;L.menuList.length>=N.value||(z(e),console.log("触底",L.menuList.length,N.value))})),(e,s)=>{const t=i,a=j;return c(),r(t,{class:"page"},{default:d((()=>[B.value?(c(),r(t,{key:0,class:"pingjia-null"},{default:d((()=>[f("未有相关记录")])),_:1})):p("v-if",!0),(c(!0),m(x,null,_(b($),((e,s)=>(c(),r(t,{key:s},{default:d((()=>[v(t,{onClick:s=>function(e,s){console.log(`./classTable?StudentId=${L.userObj.StudentId}&Id=${e.Id}&Name=${L.userObj.StudentName}&MerchantId=${C.MerchantId}`),e.Id&&h({url:`./classTable?StudentId=${L.userObj.StudentId}&Id=${e.Id}&Name=${L.userObj.StudentName}&MerchantId=${C.MerchantId}`})}(e),class:"cellDiv"},{default:d((()=>[p(' <view class="flex justify-between merP">\n                    <text class="textOverflowClass">{{ item.MerchantName || \'商家名称\' }}</text>\n                    <text class="wrap">查看课程表</text>\n                </view> '),v(t,{class:"flex borderB pt-1 pb-2"},{default:d((()=>[v(t,{class:"flex flex-column w-100"},{default:d((()=>[v(t,{class:"flex justify-between"},{default:d((()=>[v(a,{class:"proTitle",style:{"font-weight":"bold"}},{default:d((()=>[f(g(e.CourseName),1)])),_:2},1024),v(a,{class:"proTitle",style:{color:"#aaa"}},{default:d((()=>[f("班型："+g(e.ClassTypeName),1)])),_:2},1024),p(' <text class="proTitle" style="color: #aaa;">已签到：{{ item.Signed || 0 }}</text> '),v(a,{class:"wrap"},{default:d((()=>[f("查看课程表")])),_:1}),p(' <text class="proTitle" style="color: #aaa;font-size: 27rpx;">{{ item.CreateTime || \'时间\' }}</text> ')])),_:2},1024)])),_:2},1024)])),_:2},1024),v(t,{class:"flex justify-between align-center borderB border-t pt-1 pb-1"},{default:d((()=>[v(t,{class:"wrap centerDiv"},{default:d((()=>[v(a,{class:"ksTp"},{default:d((()=>[f("总课时")])),_:1}),v(a,{class:"ksP"},{default:d((()=>[f(g(e.BuyCount||0),1)])),_:2},1024)])),_:2},1024),v(t,{class:"wrap centerDiv"},{default:d((()=>[v(a,{class:"ksTp"},{default:d((()=>[f("线上")])),_:1}),v(a,{class:"ksP",style:{color:"#409EFF"}},{default:d((()=>[f(g(e.OnlineBuy||0),1)])),_:2},1024)])),_:2},1024),v(t,{class:"wrap centerDiv"},{default:d((()=>[v(a,{class:"ksTp"},{default:d((()=>[f("线下")])),_:1}),v(a,{class:"ksP",style:{color:"#67C23A"}},{default:d((()=>[f(g(e.OffLineBuy||0),1)])),_:2},1024)])),_:2},1024),v(t,{class:"wrap centerDiv"},{default:d((()=>[v(a,{class:"ksTp"},{default:d((()=>[f("已排课")])),_:1}),v(a,{class:"ksP"},{default:d((()=>[f(g(e.ScheduleCount||0),1)])),_:2},1024)])),_:2},1024),v(t,{class:"wrap centerDiv"},{default:d((()=>[v(a,{class:"ksTp"},{default:d((()=>[f("剩余")])),_:1}),v(a,{class:"ksP"},{default:d((()=>[f(g(e.LeftCount||0),1)])),_:2},1024)])),_:2},1024),p(' <view class="wrap centerDiv ">\n                        <button class="ksP btn">请假</button>\n                    </view> ')])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})}}},[["__scopeId","data-v-7fa1860f"]]);export{C as default};
