import{f as t,g as e,w as i,k as a,H as s,i as l,a as o,r as m,t as d,s as u,ab as h,ac as n,aX as r,n as p,l as c,m as f,u as g,j as y,p as b,q as L,F as I,x as _,C as w}from"./index.1a866322.js";import{_ as x}from"./u-parse.58a54c5b.js";import{o as v,r as D}from"./uni-app.es.5638d019.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import{d as k}from"./methods.10d71805.js";import{u as A}from"./useState.33e874ff.js";import{t as j}from"./tabar.9597bd6f.js";import{w as C}from"./wechatSdk.8caabd54.js";import"./index.0e6263ad.js";/* empty css                                                          */var $=G({name:"u-waterfall",emits:["update:modelValue","input"],props:{value:{type:Array,default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},addTime:{type:[Number,String],default:200},idKey:{type:String,default:"id"}},data:()=>({leftList:[],rightList:[],tempList:[],children:[]}),watch:{copyFlowList(t,e){let i=Array.isArray(e)&&e.length>0?e.length:0;this.tempList=this.tempList.concat(this.cloneData(t.slice(i))),this.splitData()}},mounted(){this.tempList=this.cloneData(this.copyFlowList),this.splitData()},computed:{valueCom(){return this.modelValue},copyFlowList(){return this.cloneData(this.valueCom)}},methods:{async splitData(){if(!this.tempList.length)return;let t=await this.$uGetRect("#u-left-column"),e=await this.$uGetRect("#u-right-column"),i=this.tempList[0];i&&(t.height<e.height?this.leftList.push(i):t.height>e.height?this.rightList.push(i):this.leftList.length<=this.rightList.length?this.leftList.push(i):this.rightList.push(i),this.tempList.splice(0,1),this.tempList.length&&setTimeout((()=>{this.splitData()}),this.addTime))},cloneData:t=>JSON.parse(JSON.stringify(t)),clear(){this.leftList=[],this.rightList=[],this.$emit("input",[]),this.$emit("update:modelValue",[]),this.tempList=[]},remove(t){let e=-1;e=this.leftList.findIndex((e=>e[this.idKey]==t)),-1!=e?this.leftList.splice(e,1):(e=this.rightList.findIndex((e=>e[this.idKey]==t)),-1!=e&&this.rightList.splice(e,1)),e=this.value.findIndex((e=>e[this.idKey]==t)),-1!=e&&(this.$emit("input",this.valueCom.splice(e,1)),this.$emit("update:modelValue",this.valueCom.splice(e,1)))},modify(t,e,i){let a=-1;if(a=this.leftList.findIndex((e=>e[this.idKey]==t)),-1!=a?this.leftList[a][e]=i:(a=this.rightList.findIndex((e=>e[this.idKey]==t)),-1!=a&&(this.rightList[a][e]=i)),a=this.valueCom.findIndex((e=>e[this.idKey]==t)),-1!=a){let t=this.cloneData(this.valueCom);t[a][e]=i,this.$emit("input",t),this.$emit("update:modelValue",t)}}}},[["render",function(o,m,d,u,h,n){const r=l;return t(),e(r,{class:"u-waterfall"},{default:i((()=>[a(r,{id:"u-left-column",class:"u-column"},{default:i((()=>[s(o.$slots,"left",{leftList:h.leftList},void 0,!0)])),_:3}),a(r,{id:"u-right-column",class:"u-column"},{default:i((()=>[s(o.$slots,"right",{rightList:h.rightList},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-6e53acf2"]]);var B=G({__name:"photolist",setup(s){A(["islogin","userinfo","MerchantId"]),o(null);const G=m({GetAlbumByIdDate:{},GetAlbumByIdDates:["https://img2.baidu.com/it/u=1703070451,3152377185&fm=253&fmt=auto&app=120&f=JPEG","https://img2.baidu.com/it/u=3446736841,652820325&fm=253&fmt=auto&app=138&f=JPEG","https://img1.baidu.com/it/u=4171020117,2678421020&fm=253&fmt=auto&app=138&f=JPEG","https://img2.baidu.com/it/u=3890660830,3546018159&fm=253&fmt=auto&app=138&f=JPEG","https://img0.baidu.com/it/u=829563109,2593916523&fm=253&fmt=auto&app=138&f=JPEG","https://img2.baidu.com/it/u=1909781963,2843853727&fm=253&fmt=auto&app=138&f=JPEG"]}),B=o(!0),F=o(50),{GetAlbumByIdDates:V,GetAlbumByIdDate:z}=d(G);v((t=>{console.log("路由信息",G),t&&t.MerchantId?(G.optionData=t,u({title:t.Name}),async function(){const t={merchantId:G.optionData.MerchantId,Id:G.optionData.Id};let e=await r(t);G.GetAlbumByIdDate=e.Result,console.log("baga",e),G.GetAlbumByIdDate.Img?(G.GetAlbumByIdDate.Img=e.Result.Img.split(","),B.value=!0,C({share_title:G.optionData.Name,share_desc:"美好的精彩瞬间，与你分享",share_link:window.location.href,share_cover:G.GetAlbumByIdDate.Img[0]})):(B.value=!1,C({share_title:G.optionData.Name,share_desc:"美好的精彩瞬间，与你分享",share_link:window.location.href}))}()):location.replace("https://appwx.xuezhilian.com/xzb/index.html#/pages/error/404")})),h((()=>{n()}));const J=t=>{F.value=t,console.log("bar高度===>",t)};return(s,o)=>{const m=l,d=D(_("u-parse"),x),u=w,h=D(_("u-waterfall"),$);return t(),e(m,{class:"page",style:p(`padding-bottom: ${F.value+50}px;`)},{default:i((()=>[a(m,{class:"title font-sm font-weight-bold mt-3 pl-2 box-border"},{default:i((()=>[c(f(g(z).Name),1)])),_:1}),a(d,{class:"colo-PY",html:g(z).Remark},null,8,["html"]),B.value?(t(),e(m,{key:0,class:"w-100 list"},{default:i((()=>[y(' <image v-for="(item,index) in GetAlbumByIdDate.Img" class="list-img mb-1" :src="item" mode="widthFix" @click="bindImage(GetAlbumByIdDate.Img,index)"></image> '),y(" 瀑布流部分 "),a(h,{modelValue:g(z).Img,"onUpdate:modelValue":o[0]||(o[0]=t=>g(z).Img=t),ref:"uWaterfall"},{left:i((({leftList:i})=>[y(' <u-lazy-load class="list-img mb-1" :image="item" img-mode="widthFix" @click="bindImage(item)"></u-lazy-load> '),(t(!0),b(I,null,L(i,((i,a)=>(t(),e(u,{key:2*a,class:"list-img mb-1",src:i,mode:"widthFix","lazy-load":!0,onClick:t=>g(k)(i)},null,8,["src","onClick"])))),128))])),right:i((({rightList:i})=>[y(' <u-lazy-load class="list-img mb-1" :image="item" img-mode="widthFix" @click="bindImage(item)"></u-lazy-load> '),(t(!0),b(I,null,L(i,((i,a)=>(t(),e(u,{key:2*a+1,class:"list-img mb-1",src:i,mode:"widthFix","lazy-load":!0,onClick:t=>g(k)(i)},null,8,["src","onClick"])))),128))])),_:1},8,["modelValue"])])),_:1})):(t(),e(m,{key:1,class:"title font-small font-weight-bold pl-2 box-border dashit"},{default:i((()=>[c("该相册里没有照片哦")])),_:1})),a(g(j),{current:0,onReady:J})])),_:1},8,["style"])}}},[["__scopeId","data-v-181fa236"]]);export{B as default};
